<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <title> New Document </title>
  <meta name="Generator" content="EditPlus">
  <meta name="Author" content="">
  <meta name="Keywords" content="">
  <meta name="Description" content="">
 </head>
  
<body>
<form action="success.html"  >
	<table width="449" height="530" border="1" align='center'>
	  <tr>
		<td colspan="2" align="center">用户名注册</td>
		</tr>
	  <tr>
		<td width="116" align="right">姓名：</td>
		<td width="323"><label>
		  <input type="text" name="" id="name" /><span id="sp1"></span>
		</label></td>
	  </tr>
	  <tr>
		<td width="116" align="right">性别：</td>
		<td width="323" ><label id="sex">
		  <input type="radio" name="sex" id="" />男
		   <input type="radio" name="sex" id="" />女<span id="sp2"></span>
		</label></td>
	  </tr>
	  <tr>
		<td align="right">年龄：</td>
		<td><label>
		  <input type="text" name="" id="age" /><span id="sp3"></span>
		</label></td>
	  </tr>
	  <tr>
		<td align="right">密码：</td>
		<td><label>
		  <input type="password" name="" id="pwd" /><span id="sp4"></span>
		</label></td>
	  </tr>
	  <tr>
		<td align="right">确认密码：</td>
		<td><label>
		  <input type="password" name="" id="qpwd" /><span id="sp5"></span>
		</label></td>
	  </tr>
	  <tr>
		<td align="right">手机：</td>
		<td><label>
		  <input type="text" name="" id="tel" /><span id="sp6"></span>
		</label></td>
	  </tr>
	  <tr>
		<td align="right">QQ:</td>
		<td><label>
		  <input type="text" name="" id="qq" /><span id="sp7"></span>
		</label></td>
	  </tr>
	  <tr>
		<td align="right">邮箱：</td>
		<td><label>
		  <input type="text" name="" id="email" /><span id="sp8"></span>
		</label></td>
	  </tr>
	  <tr>
		<td align="right">邮编：</td>
		<td><label>
		  <input type="text" name="" id="eml" /><span id="sp9"></span>
		</label></td>
	  </tr>
	  <tr>
		<td align="right">身份证：</td>
		<td><label>
		  <input type="text" name="" id="sname" /><span id="sp10"></span>
		</label></td>
	  </tr>
	  <tr>
		<td align="right">验证码：</td>
		<td><label>
		  <input type="text"  id="yzm"/>
		  <span style="width:80px;height: 20px;border: 1px solid red;display: inline-block;" id="sp11"></span>
		  <a href="#" id ="btn">看不清</a>
		</label></td>
	  </tr>
		<tr>
		<td align="right">爱好：</td>
		<td><label>
		<input type="checkbox" name="a" id="c1">
		足球
		<input type="checkbox" name="a" id="c2">
		篮球
		<input type="checkbox" name="a" id="c3">
		排球
		<input type="checkbox" name="a" id="c4">
		网球<span id="sp12"></span>
		</label></td>
	  </tr>
	  <tr>
		<td height="36" colspan="2" align="center"><label>
		  <input type="submit" value="注册"  />
		</label></td>
		</tr>
	</table>
</form>
</body>
</html>
<script src="../out.js"></script>
<script type="text/javascript">
	/*
	 要求：
	 	1、使用失去焦点事件完成表单验证  每一项验证失去焦点时都可以即时验证
	 	2、姓名： 单词字符组成  6--10为 ，不能用数字开头
	 	      年龄： 只能由数字组成  年龄不能为负数
	 	      密码：6--18位字符组成       有密码强弱验证 
	 	3、确认密码和密码相同
	 	4、手机号： 15  13  18 开头
	 	5、qq ： 5--12位数字  第一位不能是数字
	 	6、邮箱： 必须有@符号
	 	7、邮编：6为数字
	 	8、身份证： 18位   最后一位考虑有x
	 	9、验证码  
	 		输入的验证码必须和红色框中的相同，  点击看不清可以实现验证码的切换
	 		验证码由字母  数字组成
	 	10、爱好和性别必选	
	 * */
	var oform =document.getElementsByTagName("form")[0];	
	oform.onsubmit = function(){
		if(flagName && flagSex && flagAge && flagPwd && flagQpwd && flagTel && flagQq &&flagE &&flagL &&flagI){
			return true;
		}else{
			return false;
		}
	}
	
	
	var flagName = null;
	$id("name").onblur = function(){	
	    var reg =/^[a-z_\$]\w{5,9}/i;
		var uname = $id("name").value;
		if(reg.test(uname) ){
		   flagName = true;
		   $id("sp1").innerHTML = "正确";
		}else{
			flagName = false;
			$id("sp1").innerHTML = "请输入正确的用户名";
		}
	}
	
	var flagSex = null;
	var sex = document.getElementsByName("sex");
	$id("sex").onblur = function(){		
		var count =0;
		for(var i=0;i<sex.length;i++){
			if(sex[i].checked){
				count++;
			}
		}
			if(count==1){
				flagSex = true;
				$id("sp2").innerHTML ="";
			}else{
				$id("sp2").innerHTML="必选一项";
			}
	}
	
	var flagAge =null;
	$id("age").onblur = function(){		
	    var reg=/^\d{1,3}$/;
		if(reg.test($id("age").value)){
			flagAge = true;
			$id("sp3").innerHTML = "正确";
		}else{
			flagAge = false;
			$id("sp3").innerHTML ="请输入合适的年龄";
		}
	}
	
	var flagPwd = null;
	$id("pwd").onkeyup = function(){
	    var pwd =$id("pwd").value;
		var reg =/^\w{6,18}$/;
		if(reg.test(pwd)){
			flagPwd = true;
			if(pwd.length<7){
				$id("sp4").innerHTML ="弱";
			}else if(pwd.length>6 &&pwd.length<13){
				$id("sp4").innerHTML ="中";			
			}else if(pwd.length>12 && pwd.length<18){
				$id("sp4").innerHTML ="强";		
			}
			
		}else{
			flagPwd = false;
			$id("sp4").innerHTML ="请输入合法的密码"
		}
	}
	
	var flagQpwd = null;
	$id("qpwd").onkeyup = function(){
		var pwd = $id("pwd").value;
		var qpwd = $id("qpwd").value;
		if( qpwd == pwd ){
			flagQpwd = true;
			$id("sp5").innerHTML = "正确"
		}else{
			flagQpwd = false;
			$id("sp5").innerHTML = "再次输入的密码和原密码不一致"
		}
	}
	
	var flagTel = null;
	$id("tel").onblur = function(){
		var reg =/^[1](3|5|8)\d{9}$/
		if(reg.test($id("tel").value)){
			flagTel = true;
			$id("sp6").innerHTML = "正确";
		}else{
			flagTel = false;
			$id("sp6").innerHTML ="请输入正确的电话号码"
		}
	}
	
	var flagQq = null;
	$id("qq").onblur = function(){
		var reg =/^[a-z_\$]\w{4,11}$/
		if(reg.test($id("qq").value)){
			flagQq = true;
			$id("sp7").innerHTML = "正确";
		}else{
			flagQq =false;
			$id("sp7").innerHTML ="请输入正确的qq号码"
		}
	}
	
	var flagE =null;
	$id("email").onblur = function(){
		var reg =/^\w+@(\w+\.)\w+$/
		if(reg.test($id("email").value)){
			flagE=true;
			$id("sp8").innerHTML ="正确"
		}else{
			flagE = false;
			$id("sp8").innerHTML ="请输入正确的邮箱号码"
		}
	}
	
	var flagL =null;
	$id("eml").onblur = function(){
		var reg=/^\d{6}$/
		if(reg.test($id("eml").value)){
			flagL = true;
			$id("sp9").innerHTML = "正确";
		}else{
			flagL = false;
			$id("sp9").innerHTML ="请输入正确的邮编"
		}
	}
	
	var flagI =null;
	$id("sname").onblur = function(){
		reg=/^\d{17}(\d|x)$/i;
		if(reg.test($id("sname").value)){
			flagI = true;
			$id("sp10").innerHTML = "正确"
		}else{
			flagI = false;
			$id("sp10").innerHTML ="请输入正确的身份证件号码"
		}
	}
	
	
	$id("sp11").innerHTML=fnYan();
	$id("btn").onclick = function(){
		$id("sp11").innerHTML=fnYan();
	}
	$id("yzm").onblur = function(){
		var yzm =$id("yzm").value;
		var sj =$id("sp11").innerHTML;
		if(yzm !=sj){
			alert("验证码输入有误")
		}
	}
	var sport = document.getElementsByName("a");
		var num =0;
		for(var i=0;i<sport.length;i++){
			if(sport[i].checked){
				num++;
			}
		}
			if(num ==0){
			$id("sp12").innerHTML ="必须选择一项运动"
	}else{
		$id("sp12").innerHTML ="";
	}
   
	//验证码
	function rand(min,max){//随机函数
		return Math.round( Math.random()*(max-min)+min );
	}
	function fnYan(){
	var arrstr=[];
	for(var i=1;i<=4;i++){
		var yan = rand(48,122);
		if(yan>=58&&yan<=64 || yan>=91&&yan<=96){
			i--;//重新抽取验证码
		}else{
			arrstr[i]=String.fromCharCode(yan);//将ASCII数字转变成字母
		}
	}
	return arrstr.join("");//转成数字//split是转成字符串
	}
</script>
